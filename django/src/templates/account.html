<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mon Compte</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/account.css' %}">
</head>
<body>
    <div class="account-container">
        <h1>Mon Compte</h1>
        
        <!-- Affichage des informations -->
        <div class="user-info">
            {% if user.profile_picture %}
                <img src="{{ user.profile_picture.url }}" alt="Profile Picture" class="profile-pic">
            {% else %}
                <p>Aucune photo de profil.</p>
            {% endif %}
            <h5>{{ user.username }}</h5>
            <p>Email: {{ user.email }}</p>
            <p>Elo: {{ user.elo }}</p>
        </div>

        <!-- Formulaire de mise à jour -->
        <form id="updateForm" class="account-form" enctype="multipart/form-data">
            {% csrf_token %}
            <div id="updateError" class="error" style="display: none;"></div>
            
            <div class="form-group">
                <label for="{{ user_form.username.id_for_label }}">Nom d'utilisateur :</label>
                {{ user_form.username }}
                <span id="username-error" class="error"></span>
            </div>
            
            <div class="form-group">
                <label for="{{ user_form.email.id_for_label }}">Email :</label>
                {{ user_form.email }}
                <span id="email-error" class="error"></span>
            </div>
            
            <div class="form-group">
                <label for="{{ user_form.profile_picture.id_for_label }}">Photo de profil :</label>
                {{ user_form.profile_picture }}
                <span id="profile-picture-error" class="error"></span>
            </div>

            <button type="submit" name="update_info" class="submit-btn update-btn">Update account</button>
        </form>

        <!-- Formulaire de changement de mot de passe -->
        <form id="passwordForm" class="account-form">
            {% csrf_token %}
            <div id="passwordError" class="error" style="display: none;"></div>
            
            <div class="form-group">
                <label for="{{ password_form.old_password.id_for_label }}">Ancien mot de passe :</label>
                {{ password_form.old_password }}
                <span id="old-password-error" class="error"></span>
            </div>
            
            <div class="form-group">
                <label for="{{ password_form.new_password1.id_for_label }}">Nouveau mot de passe :</label>
                {{ password_form.new_password1 }}
                <span id="new-password1-error" class="error"></span>
            </div>
            
            <div class="form-group">
                <label for="{{ password_form.new_password2.id_for_label }}">Confirmer le nouveau mot de passe :</label>
                {{ password_form.new_password2 }}
                <span id="new-password2-error" class="error"></span>
            </div>

            <button type="submit" name="change_password" class="submit-btn password-btn">Change password</button>
        </form>

        <!-- Déconnexion -->
        <form id="disconnectForm" class="account-form">
            {% csrf_token %}
            <button type="submit" name="disconnect" class="submit-btn disconnect-btn">Disconnect</button>
        </form>

        <!-- Suppression du compte -->
        <form id="deleteForm" class="account-form">
            {% csrf_token %}
            <button type="submit" name="delete_account" class="submit-btn delete-btn">Delete accountttt</button>
        </form>
    </div>
    <script src="{% static 'js/account.js' %}"></script>
</body>
</html>